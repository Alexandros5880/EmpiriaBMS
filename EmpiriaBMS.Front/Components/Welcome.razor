@page "/"
@page "/welcome"

@using EmpiriaBMS.Front.Services
@using EmpiriaBMS.Front.Components.Admin.DisciplinesTypes;
@using EmpiriaBMS.Front.Components.Admin.DrawingsTypes;
@using EmpiriaBMS.Front.Components.Admin.OthersTypes;
@using EmpiriaBMS.Front.Components.Admin.Projects;
@using EmpiriaBMS.Front.Components.Admin.ProjectsTypes;
@using EmpiriaBMS.Front.Components.Admin.Roles;
@using EmpiriaBMS.Front.Components.Admin.Users;
@using EmpiriaBMS.Front.Components;

@inject AuthorizeServices authorizeServices
@inject PageCachedService pageCached

@if (SeeAdmin)
{
    var prevPageType = pageCached.GetPageType()?.FullName ?? "";
    
    if (prevPageType.Equals(disciplineTypes))
    {
        <DisciplinesTypes />
    }
    else if (prevPageType.Equals(drawingsTypes))
    {
        <DrawingsTypes />
    }
    else if (prevPageType.Equals(othersTypes))
    {
        <OthersTypes />
    }
    else if (prevPageType.Equals(projects))
    {
        <Projects />
    }
    else if (prevPageType.Equals(roles))
    {
        <Roles />
    }
    else if (prevPageType.Equals(users))
    {
        <Users />
    }
    else if (prevPageType.Equals(dashboard) && SeeDashboard)
    {
        <Dashboard />
    }
    else
    {
        <Projects />
    }
}
else
{
    <Dashboard />
}

@code {

    #region Authorization Properties
    public bool SeeAdmin
    {
        get
        {
            return authorizeServices.PermissionOrds.Contains(7);
        }
    }
    public bool SeeDashboard
    {
        get
        {
            return authorizeServices.PermissionOrds.Contains(4);
        }
    }
    #endregion

    #region Navigation Pages Types Names
    private string disciplineTypes = typeof(DisciplinesTypes).FullName;
    private string drawingsTypes = typeof(DrawingsTypes).FullName;
    private string othersTypes = typeof(OthersTypes).FullName;
    private string projects = typeof(Projects).FullName;
    private string roles = typeof(Roles).FullName;
    private string users = typeof(Users).FullName;
    private string dashboard = typeof(Dashboard).FullName;
    #endregion
}
