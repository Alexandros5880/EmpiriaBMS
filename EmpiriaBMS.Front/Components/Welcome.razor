@page "/"
@page "/welcome"

@using EmpiriaBMS.Front.Services
@using EmpiriaBMS.Front.Components.Admin.DisciplinesTypes;
@using EmpiriaBMS.Front.Components.Admin.DrawingsTypes;
@using EmpiriaBMS.Front.Components.Admin.OthersTypes;
@using EmpiriaBMS.Front.Components.Admin.Projects;
@using EmpiriaBMS.Front.Components.Admin.ProjectsTypes;
@using EmpiriaBMS.Front.Components.Admin.Roles;
@using EmpiriaBMS.Front.Components.Admin.Users;
@using EmpiriaBMS.Front.Components;

@inject AuthorizeServices authorizeServices
@inject PageCachedService pageCached

@if (SeeAdmin)
{
    var prevPageType = pageCached.GetPageType();
    if (prevPageType == typeof(DisciplinesTypes))
    {
        <DisciplinesTypes />
    }
    else if (prevPageType == typeof(DrawingsTypes))
    {
        <DrawingsTypes />
    }
    else if (prevPageType == typeof(OthersTypes))
    {
        <OthersTypes />
    }
    else if (prevPageType == typeof(Projects))
    {
        <Projects />
    }
    else if (prevPageType == typeof(Roles))
    {
        <Roles />
    }
    else if (prevPageType == typeof(Users))
    {
        <Users />
    }
    else if (prevPageType == typeof(Dashboard) && SeeDashboard)
    {
        <Dashboard />
    }
    else
    {
        <Projects />
    }
}
else
{
    <Dashboard />
}

@code {

    #region Authorization Properties
    public bool SeeAdmin
    {
        get
        {
            return authorizeServices.PermissionOrds.Contains(7);
        }
    }
    public bool SeeDashboard
    {
        get
        {
            return authorizeServices.PermissionOrds.Contains(4);
        }
    }
    #endregion

}
