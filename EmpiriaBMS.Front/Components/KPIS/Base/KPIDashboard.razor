@using EmpiriaBMS.Front.Services;
@using EmpiriaBMS.Front.Horizontal;
@using ChartJs.Blazor;
@using EmpiriaBMS.Front.Components.KPIS;
@using FluentUI = Microsoft.Fast.Components.FluentUI;
@using EmpiriaBMS.Front.Components.KPIS.Simple;

@inject IDataProvider _dataProvider
@inject SharedAuthDataService _sharedAuthData
@inject IMapper _mapper
@inject Logging.LoggerManager Logger
@inject MicrosoftTeams MicrosoftTeams

<FluentGrid Spacing="3">

    <!-- Left -->
    <FluentGridItem xl="9" lg="9" md="12" sm="12" xs="12">

        <!-- Grid -->
        <FluentGrid Spacing="3">
        
            <FluentGridItem xl="12" lg="12" md="12" sm="12" xs="12">
                <div class="p-3 rounded-3"
                     style="background-color: #bfc1d7; color: var(--kpi-text-color);">
                    <h3>Key Performance Indicators (KPIS)</h3>
                </div>
            </FluentGridItem>
    
            <FluentGridItem xl="12" lg="12" md="12" sm="12" xs="12">

                <!-- Grid -->
                <FluentGrid Spacing="3">

                    <!-- Left-->
                    @if (SeeHoursPerRoleKPI)
                    {
                        <FluentGridItem xl="3" lg="6" md="12" sm="12" xs="12">
                            <div class="p-3 rounded-3" style="background-color: #bfc1d7;">
                                <HoursPerRoleKPI />
                            </div>
                        </FluentGridItem>
                    }

                    <!-- Right-->
                    @if (SeeActiveDelayedProjectsKPI)
                    {
                        <FluentGridItem xl="3" lg="6" md="12" sm="12" xs="12">
                            <div class="p-3 rounded-3" style="background-color: #bfc1d7;">
                                <DelayedProjectsKPI />
                            </div>
                        </FluentGridItem>
                    }

                    <!-- Left-->
                    @if (SeeActiveDelayedProjectsTypesCounterKPI)
                    {
                        <FluentGridItem xl="3" lg="6" md="12" sm="12" xs="12">
                            <div class="p-3 rounded-3" style="background-color: #bfc1d7;">
                                <DelayedProjectTypesKPI />
                            </div>
                        </FluentGridItem>
                    }

                    <!-- Right-->
                    @if (SeePendingsPaymentsKPI)
                    {
                        <FluentGridItem xl="3" lg="6" md="12" sm="12" xs="12">
                            <div class="p-3 rounded-3" style="background-color: #bfc1d7;">
                                <PandingPaymentsKPI />
                            </div>
                        </FluentGridItem>
                    }

                </FluentGrid>
                
            </FluentGridItem>

            <!-- Full -->
            @if (SeeHoursPerRoleKPI)
            {
                <FluentGridItem xl="12" lg="12" md="12" sm="12" xs="12">
                    <div class="p-3 rounded-3" style="background-color: #bfc1d7;">
                        <HoursPerUserKPI />
                    </div>
                </FluentGridItem>
            }

            <!-- Full -->
            @if (SeeTenderTableKPI)
            {
                <FluentGridItem xl="12" lg="12" md="12" sm="12" xs="12">
                    <div class="p-3 rounded-3" style="background-color: #bfc1d7; color: var(--kpi-text-color);">
                        <TenderTable />
                    </div>
                </FluentGridItem>
            }

        </FluentGrid>
    
    </FluentGridItem>

    <!-- Right -->
    <FluentGridItem xl="3" lg="3" md="12" sm="12" xs="12">

        <!-- Grid -->
        <FluentGrid Spacing="3">

            @if (SeeNextYearIncome)
            {
                <FluentGridItem xl="12" lg="12" md="12" sm="12" xs="12">
                    <div class="p-3 rounded-3" style="background-color: #bfc1d7; color: var(--kpi-text-color);">
                        <NextYearNetIncomeKPI />
                    </div>
                </FluentGridItem>
            }

            @if (SeeAllProjectsMissedDeadLineKPI || SeeMyProjectsMissedDeadLineKPI)
            {
                <FluentGridItem xl="12" lg="12" md="12" sm="12" xs="12">
                    <div class="p-3 rounded-3" style="background-color: #bfc1d7; color: var(--kpi-text-color);">
                        <ProjectsMissedDeadlineKPI />
                    </div>
                </FluentGridItem>
            }

            @if (SeeEstimatedInvoicing)
            {
                <FluentGridItem xl="12" lg="12" md="12" sm="12" xs="12">
                    <div class="p-3 rounded-3" style="background-color: #bfc1d7; color: var(--kpi-text-color);">
                        <EstimatedInvoicing />
                    </div>
                </FluentGridItem>
            }
            
            @if (SeeUnpaidPaidInvoices)
            {
                <FluentGridItem xl="12" lg="12" md="12" sm="12" xs="12">
                    <div class="p-3 rounded-3" style="background-color: #bfc1d7; color: var(--kpi-text-color);">
                        <PaidUnpaidInvoicesCount />
                    </div>
                </FluentGridItem>
            }

            @if (SeeEmployeeTurnoverKPI)
            {
                <FluentGridItem xl="12" lg="12" md="12" sm="12" xs="12">
                    <div class="p-3 rounded-3" style="background-color: #bfc1d7; color: var(--kpi-text-color);">
                        <EmployeeTurnoverKPI />
                    </div>
                </FluentGridItem>
            }

        </FluentGrid>

    </FluentGridItem>

</FluentGrid>