@page "/admin/users"
@layout AdminLayout

@using EmpiriaBMS.Front.Services
@inject PreviousLocationService previusLocationService
@inject IDataProvider DataProvider
@inject IMapper Mapper

<div class="row">
    <div class="col-12">
        <div class="text-left">
            <h3>Users</h3>
        </div>
        <div class="table-responsive p-1 table-container">
            <table class="table table-hover text-center">
                <thead>
                    <tr>
                        <th scope="col" class="sticky-header"><h5>User</h5></th>
                        <th scope="col" class="sticky-header"><h5>Email</h5></th>
                        <th scope="col" class="sticky-header"><h5>Edit</h5></th>
                        <th scope="col" class="sticky-header"><h5>Delete</h5></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var user in _users)
                    {
                        <tr class="align-middle"
                            @onclick="@(() => _onSelectUser(user.Id))">

                            <td class="align-middle
                                    @((_selectedUser == null ||
                                            !_selectedUser.Id.Equals(user.Id)
                                                            ? "" : "highlight_1"))"
                                style="word-wrap: break-word;">
                                <labe>@user.LastName @user.FirstName</labe>
                            </td>

                            <td class="align-middle
                                    @((_selectedUser == null ||
                                            !_selectedUser.Id.Equals(user.Id)
                                                            ? "" : "highlight_1"))">
                                <label>@user.Email</label>
                            </td>

                            <td class="align-middle
                                    @((_selectedUser == null ||
                                            !_selectedUser.Id.Equals(user.Id)
                                                            ? "" : "highlight_1"))">
                                <span class="material-symbols--edit-outline" />
                            </td>

                            <td class="align-middle
                                    @((_selectedUser == null ||
                                            !_selectedUser.Id.Equals(user.Id)
                                                            ? "" : "highlight_1"))">
                                <span class="fluent--delete-28-regular" />
                            </td>

                        </tr>
                    }
                </tbody>
            </table>
        </div>
        <!-- Paginator -->
        <div style="text-align: right;">
            <Paginator @ref=_paginator Renderer="@_getUsers" />
        </div>
    </div>
</div>
